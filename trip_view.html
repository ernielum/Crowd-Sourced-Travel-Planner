<!-- 
    This page displays a specific user's trip and lists pinned experiences.

    Actions:
            - Edit trip link
            - Delete trip
            - Search more experiences link
            - Select Experience to view details

-->

<!doctype html>

<html>

<head>
    <meta charset="utf-8">
    <title>Crowd-sourced Travel App</title>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined">
</head>

<body>
    <header>
        <div class="header-container">
            <h1>CROWD-sourced Travel App</h1>
            <a href="/logout" class="sign-in-link">
            Log Out
            <span class="material-symbols-outlined">account_circle</span>
            </a>
        </div>
        <!-- Navigation Links -->
        <div class="nav">
            <a href="{{ url_for('trips') }}">Return to My Trips</a>
        </div>
    </header>

    <div class="trip-view-page">
        <main>

            <div id="map"></div>
            
            <div class="search-bar-container">
                <span class="material-icons-outlined">search</span>
                <input type="text" id="experience-search" placeholder="Find New Experiences">
                <button onclick="searchPlaces()">Search</button>
                <button onclick="pinExperience()" id="pin-button" style="display: none;">Pin</button>
            </div>
            <br>

            <table class="experiences-table">
                <tr>
                    <th class="th-trip">{{ trip.name }}</th>
                </tr>
                {% for experience_data in experiences %}
    
                <tr>{% include 'experience_td.html' %}</tr>
    
                <td class="td-unpin">
                    <form class="unpin-form" id="unpin-experience" method="POST" action="/experience_unpin">
                        <input type="hidden" id="tripId" name="tripId" value={{trip.id}} />
                        <input type="hidden" id="experienceId" name="experienceId"
                            value={{experience_data.experience.id}} />
                        <input class="small-button" type="submit" value="unpin">
                    </form>
                </td>
    
                {% endfor %}
            </table>
        </main>
    </div>   
</body>

</html>